jQuery(document).ready(e=>{"use strict";window.SV_WC_Google_Pay_Handler_v5_8_1=class{constructor(e){let{plugin_id:t,merchant_id:o,gateway_id:a,gateway_id_dasherized:n,ajax_url:s,process_nonce:i,button_style:r,card_types:c,generic_error:l}=e;this.gatewayID=a,this.ajaxURL=s,this.processNonce=i;const y=c;this.baseRequest={apiVersion:2,apiVersionMinor:0};const g={type:"PAYMENT_GATEWAY",parameters:{gateway:t,gatewayMerchantId:o}};this.baseCardPaymentMethod={type:"CARD",parameters:{allowedAuthMethods:["PAN_ONLY","CRYPTOGRAM_3DS"],allowedCardNetworks:y}},this.cardPaymentMethod=Object.assign({},this.baseCardPaymentMethod,{tokenizationSpecification:g}),this.paymentsClient=null}getGoogleIsReadyToPayRequest(){return Object.assign({},this.baseRequest,{allowedPaymentMethods:[this.baseCardPaymentMethod]})}getGoogleTransactionInfo(){return{countryCode:"US",currencyCode:"USD",totalPriceStatus:"FINAL",totalPrice:"1.00"}}getGooglePaymentDataRequest(){const e=Object.assign({},this.baseRequest);return e.allowedPaymentMethods=[this.cardPaymentMethod],e.transactionInfo=this.getGoogleTransactionInfo(),e.merchantInfo={merchantName:"Example Merchant"},e}getGooglePaymentsClient(){return null===this.paymentsClient&&(this.paymentsClient=new google.payments.api.PaymentsClient({environment:"TEST"})),this.paymentsClient}addGooglePayButton(){const e=this.getGooglePaymentsClient().createButton({onClick:()=>this.onGooglePaymentButtonClicked()});document.getElementById("sv-wc-google-pay-button-container").appendChild(e)}prefetchGooglePaymentData(){const e=this.getGooglePaymentDataRequest();e.transactionInfo={totalPriceStatus:"NOT_CURRENTLY_KNOWN",currencyCode:"USD"},this.getGooglePaymentsClient().prefetchPaymentData(e)}processPayment(t){console.log(t);const o={action:`wc_${this.gatewayID}_google_pay_process_payment`,nonce:this.processNonce,paymentMethod:JSON.stringify(t.paymentMethodData)};e.post(this.ajaxURL,o,e=>{console.log(e),e.success&&(window.location=e.redirect)})}onGooglePaymentButtonClicked(){const e=this.getGooglePaymentDataRequest();e.transactionInfo=this.getGoogleTransactionInfo(),this.getGooglePaymentsClient().loadPaymentData(e).then(e=>{this.processPayment(e)}).catch(e=>{console.error(e)})}init(){this.getGooglePaymentsClient().isReadyToPay(this.getGoogleIsReadyToPayRequest()).then(e=>{e.result&&this.addGooglePayButton()}).catch(e=>{console.error(e)})}},e(document.body).trigger("sv_wc_google_pay_handler_v5_8_1_loaded")});
//# sourceMappingURL=sv-wc-payment-gateway-google-pay.min.js.map