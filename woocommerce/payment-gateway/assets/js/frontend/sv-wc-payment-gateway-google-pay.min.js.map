{"version":3,"sources":["sv-wc-payment-gateway-google-pay.js"],"names":["jQuery","document","ready","$","window","SV_WC_Google_Pay_Handler_v5_8_1","params","plugin_id","merchant_id","merchant_name","gateway_id","gateway_id_dasherized","ajax_url","recalculate_totals_nonce","process_nonce","button_style","card_types","generic_error","gatewayID","merchantID","merchantName","ajaxURL","recalculateTotalsNonce","processNonce","genericError","product_id","productID","allowedCardNetworks","baseRequest","apiVersion","apiVersionMinor","allowedCardAuthMethods","tokenizationSpecification","type","parameters","baseCardPaymentMethod","allowedAuthMethods","cardPaymentMethod","Object","assign","paymentsClient","allowedPaymentMethods","resolve","getGoogleTransactionInfo","transactionInfo","console","log","paymentDataRequest","merchantInfo","merchantId","callbackIntents","shippingAddressRequired","shippingAddressParameters","getGoogleShippingAddressParameters","shippingOptionRequired","google","payments","api","PaymentsClient","paymentDataCallbacks","onPaymentAuthorized","paymentData","onPaymentDataChanged","Promise","reject","processPayment","err","error","transactionState","intent","message","reason","intermediatePaymentData","shippingAddress","shippingOptionData","chosenShippingMethod","callbackTrigger","id","getUpdatedTotals","paymentDataRequestUpdate","newShippingOptionParameters","shippingOptions","length","getGoogleUnserviceableAddressError","data","action","post","response","success","parseJSON","fail_payment","shippingMethod","allowedCountryCodes","phoneNumberRequired","getGooglePaymentsClient","button","createButton","onClick","onGooglePaymentButtonClicked","getElementById","appendChild","getGooglePaymentDataRequest","totalPriceStatus","currencyCode","prefetchPaymentData","nonce","JSON","stringify","location","redirect","block_ui","displayItems","loadPaymentData","init_product_page","init_cart_page","init_checkout_page","isReadyToPay","getGoogleIsReadyToPayRequest","then","result","addGooglePayButton","ui_element","parents","unblock_ui","render_errors","errors","remove","prepend","join","removeClass","unblock","animate","scrollTop","offset","top","block","overlayCSS","background","opacity","body","trigger"],"mappings":"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","sourcesContent":["jQuery( document ).ready( ( $ ) => {\n\n\t\"use strict\"\n\n\t/**\n\t * Google Pay handler.\n\t *\n\t * @since 5.9.0-dev.1\n\t *\n\t * @type {SV_WC_Google_Pay_Handler_v5_8_1} object\n\t */\n\twindow.SV_WC_Google_Pay_Handler_v5_8_1 = class SV_WC_Google_Pay_Handler_v5_8_1 {\n\n\t\t/**\n\t\t * Handler constructor.\n\t\t *\n\t\t * @since 5.9.0-dev.1\n\t\t *\n\t\t * @param {Object} params The plugin ID\n\t\t * @param {string} params.plugin_id The plugin ID\n\t\t * @param {string} params.merchant_id The merchant ID\n\t\t * @param {string} params.merchant_name The site name\n\t\t * @param {string} params.gateway_id The gateway ID\n\t\t * @param {string} params.gateway_id_dasherized The gateway ID dasherized\n\t\t * @param {string} params.ajax_url The AJAX URL\n\t\t * @param {string} params.recalculate_totals_nonce Nonce for the recalculate_totals AJAX action\n\t\t * @param {string} params.process_nonce Nonce for the process AJAX action\n\t\t * @param {string} params.button_style The button style\n\t\t * @param {string[]} params.card_types The supported card types\n\t\t * @param {string} params.generic_error The generic error message\n\t\t * @param {string} params.product_id The product ID if we are on a Product page\n\t\t */\n\t\tconstructor(params) {\n\n\t\t\tlet {\n\t\t\t\tplugin_id,\n\t\t\t\tmerchant_id,\n\t\t\t\tmerchant_name,\n\t\t\t\tgateway_id,\n\t\t\t\tgateway_id_dasherized,\n\t\t\t\tajax_url,\n\t\t\t\trecalculate_totals_nonce,\n\t\t\t\tprocess_nonce,\n\t\t\t\tbutton_style,\n\t\t\t\tcard_types,\n\t\t\t\tgeneric_error\n\t\t\t} = params;\n\n\t\t\tthis.gatewayID = gateway_id;\n\t\t\tthis.merchantID = merchant_id;\n\t\t\tthis.merchantName = merchant_name;\n\t\t\tthis.ajaxURL = ajax_url;\n\t\t\tthis.recalculateTotalsNonce = recalculate_totals_nonce;\n\t\t\tthis.processNonce = process_nonce;\n\t\t\tthis.genericError = generic_error;\n\n\t\t\tif (params.product_id) {\n\t\t\t\tthis.productID = params.product_id;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Card networks supported by your site and your gateway\n\t\t\t *\n\t\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#CardParameters|CardParameters}\n\t\t\t */\n\t\t\tconst allowedCardNetworks = card_types;\n\n\t\t\t/**\n\t\t\t * Define the version of the Google Pay API referenced when creating your configuration\n\t\t\t *\n\t\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#PaymentDataRequest|apiVersion in PaymentDataRequest}\n\t\t\t */\n\t\t\tthis.baseRequest = {\n\t\t\t\tapiVersion: 2,\n\t\t\t\tapiVersionMinor: 0\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Card authentication methods supported by your site and your gateway\n\t\t\t *\n\t\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#CardParameters|CardParameters}\n\t\t\t *\n\t\t\t * @todo confirm your processor supports Android device tokens for your supported card networks\n\t\t\t */\n\t\t\tconst allowedCardAuthMethods = [\"PAN_ONLY\", \"CRYPTOGRAM_3DS\"];\n\n\t\t\t/**\n\t\t\t * Identify your gateway and your site's gateway merchant identifier\n\t\t\t *\n\t\t\t * The Google Pay API response will return an encrypted payment method capable\n\t\t\t * of being charged by a supported gateway after payer authorization\n\t\t\t *\n\t\t\t * @todo check with your gateway on the parameters to pass\n\t\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#gateway|PaymentMethodTokenizationSpecification}\n\t\t\t */\n\t\t\tconst tokenizationSpecification = {\n\t\t\t\ttype: 'PAYMENT_GATEWAY',\n\t\t\t\tparameters: {\n\t\t\t\t\t'gateway': plugin_id,\n\t\t\t\t\t'gatewayMerchantId': this.merchantID\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Describe your site's support for the CARD payment method and its required fields\n\t\t\t *\n\t\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#CardParameters|CardParameters}\n\t\t\t */\n\t\t\tthis.baseCardPaymentMethod = {\n\t\t\t\ttype: 'CARD',\n\t\t\t\tparameters: {\n\t\t\t\t\tallowedAuthMethods: allowedCardAuthMethods,\n\t\t\t\t\tallowedCardNetworks: allowedCardNetworks\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Describe your site's support for the CARD payment method including optional fields\n\t\t\t *\n\t\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#CardParameters|CardParameters}\n\t\t\t */\n\t\t\tthis.cardPaymentMethod = Object.assign(\n\t\t\t\t{},\n\t\t\t\tthis.baseCardPaymentMethod,\n\t\t\t\t{\n\t\t\t\t\ttokenizationSpecification: tokenizationSpecification\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t/**\n\t\t\t * An initialized google.payments.api.PaymentsClient object or null if not yet set\n\t\t\t *\n\t\t\t * @see {@link getGooglePaymentsClient}\n\t\t\t */\n\t\t\tthis.paymentsClient = null;\n\t\t}\n\n\t\t/**\n\t\t * Configure your site's support for payment methods supported by the Google Pay\n\t\t * API.\n\t\t *\n\t\t * Each member of allowedPaymentMethods should contain only the required fields,\n\t\t * allowing reuse of this base request when determining a viewer's ability\n\t\t * to pay and later requesting a supported payment method\n\t\t *\n\t\t * @returns {object} Google Pay API version, payment methods supported by the site\n\t\t */\n\t\tgetGoogleIsReadyToPayRequest() {\n\n\t\t\treturn Object.assign(\n\t\t\t\t{},\n\t\t\t\tthis.baseRequest,\n\t\t\t\t{\n\t\t\t\t\tallowedPaymentMethods: [this.baseCardPaymentMethod]\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t/**\n\t\t * Configure support for the Google Pay API\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#PaymentDataRequest|PaymentDataRequest}\n\t\t *\n\t\t * @param {function} resolve callback\n\t\t * @returns {object} PaymentDataRequest fields\n\t\t */\n\t\tgetGooglePaymentDataRequest( resolve ) {\n\n\t\t\treturn this.getGoogleTransactionInfo( ( transactionInfo ) => {\n\n\t\t\t\tconsole.log( 'transactionInfo' );\n\t\t\t\tconsole.log( transactionInfo );\n\n\t\t\t\tconst paymentDataRequest = Object.assign({}, this.baseRequest);\n\t\t\t\tpaymentDataRequest.allowedPaymentMethods = [this.cardPaymentMethod];\n\n\t\t\t\tpaymentDataRequest.transactionInfo = transactionInfo;\n\n\t\t\t\tconsole.log(paymentDataRequest);\n\n\t\t\t\tpaymentDataRequest.merchantInfo = {\n\t\t\t\t\tmerchantId: this.merchantID,\n\t\t\t\t\tmerchantName: this.merchantName\n\t\t\t\t};\n\n\t\t\t\tpaymentDataRequest.callbackIntents = [\"SHIPPING_ADDRESS\", \"SHIPPING_OPTION\", \"PAYMENT_AUTHORIZATION\"];\n\t\t\t\tpaymentDataRequest.shippingAddressRequired = true;\n\t\t\t\tpaymentDataRequest.shippingAddressParameters = this.getGoogleShippingAddressParameters();\n\t\t\t\tpaymentDataRequest.shippingOptionRequired = true;\n\n\t\t\t\tresolve( paymentDataRequest );\n\t\t\t} );\n\t\t}\n\n\t\t/**\n\t\t * Return an active PaymentsClient or initialize\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/client#PaymentsClient|PaymentsClient constructor}\n\t\t * @returns {google.payments.api.PaymentsClient} Google Pay API client\n\t\t */\n\t\tgetGooglePaymentsClient() {\n\t\t\tif ( this.paymentsClient === null ) {\n\t\t\t\tthis.paymentsClient = new google.payments.api.PaymentsClient({\n\t\t\t\t\tmerchantInfo: {\n\t\t\t\t\t\tmerchantName: this.merchantName,\n\t\t\t\t\t\tmerchantId: this.merchantID\n\t\t\t\t\t},\n\t\t\t\t\tpaymentDataCallbacks: {\n\t\t\t\t\t\tonPaymentAuthorized: (paymentData) => this.onPaymentAuthorized(paymentData),\n\t\t\t\t\t\tonPaymentDataChanged: (paymentData) => this.onPaymentDataChanged(paymentData)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this.paymentsClient;\n\t\t}\n\n\t\tonPaymentAuthorized(paymentData) {\n\n\t\t\tconsole.log('onPaymentAuthorized');\n\t\t\tconsole.log(paymentData);\n\n\t\t\treturn new Promise((resolve, reject) => {\n\n\t\t\t\t// handle the response\n\t\t\t\ttry {\n\t\t\t\t\tthis.processPayment(paymentData, resolve);\n\t\t\t\t\t\t// .then(() => {\n\t\t\t\t\t\t// \tresolve({transactionState: 'SUCCESS'});\n\t\t\t\t\t\t// })\n\t\t\t\t\t\t// .catch(() => {\n\t\t\t\t\t\t// \tconsole.log('catch');\n\t\t\t\t\t\t// \tresolve({\n\t\t\t\t\t\t// \t\ttransactionState: 'ERROR',\n\t\t\t\t\t\t// \t\terror: {\n\t\t\t\t\t\t// \t\t\tintent: 'SHIPPING_ADDRESS',\n\t\t\t\t\t\t// \t\t\tmessage: 'Invalid data',\n\t\t\t\t\t\t// \t\t\treason: 'PAYMENT_DATA_INVALID'\n\t\t\t\t\t\t// \t\t}\n\t\t\t\t\t\t// \t});\n\t\t\t\t\t\t// });\n\t\t\t\t}\tcatch(err) {\n\t\t\t\t\tconsole.log('catch');\n\t\t\t\t\t// show error in developer console for debugging\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\treject({\n\t\t\t\t\t\ttransactionState: 'ERROR',\n\t\t\t\t\t\terror: {\n\t\t\t\t\t\t\tintent: 'PAYMENT_AUTHORIZATION',\n\t\t\t\t\t\t\tmessage: 'Insufficient funds',\n\t\t\t\t\t\t\treason: 'PAYMENT_DATA_INVALID'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Handles dynamic buy flow shipping address and shipping options callback intents.\n\t\t *\n\t\t * @param {object} intermediatePaymentData response from Google Pay API a shipping address or shipping option is selected in the payment sheet.\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/response-objects#IntermediatePaymentData|IntermediatePaymentData object reference}\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/response-objects#PaymentDataRequestUpdate|PaymentDataRequestUpdate}\n\t\t * @returns Promise<{object}> Promise of PaymentDataRequestUpdate object to update the payment sheet.\n\t\t */\n\t\tonPaymentDataChanged(intermediatePaymentData) {\n\n\t\t\tconsole.log('onPaymentDataChanged');\n\t\t\tconsole.log(intermediatePaymentData);\n\n\t\t\treturn new Promise((resolve, reject) => {\n\n\t\t\t\tconsole.log(resolve);\n\t\t\t\tconsole.log(reject);\n\n\t\t\t\ttry {\n\t\t\t\t\tlet shippingAddress = intermediatePaymentData.shippingAddress;\n\t\t\t\t\tlet shippingOptionData = intermediatePaymentData.shippingOptionData;\n\t\t\t\t\tlet chosenShippingMethod = '';\n\n\t\t\t\t\tif (intermediatePaymentData.callbackTrigger == \"SHIPPING_OPTION\") {\n\t\t\t\t\t\tchosenShippingMethod = shippingOptionData.id;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.getUpdatedTotals( shippingAddress, chosenShippingMethod, ( paymentDataRequestUpdate ) => {\n\n\t\t\t\t\t\tif (paymentDataRequestUpdate.newShippingOptionParameters.shippingOptions.length == 0) {\n\t\t\t\t\t\t\tpaymentDataRequestUpdate = {\n\t\t\t\t\t\t\t\terror: this.getGoogleUnserviceableAddressError()\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconsole.log('paymentDataRequestUpdate');\n\t\t\t\t\t\tconsole.log(paymentDataRequestUpdate);\n\n\t\t\t\t\t\tresolve(paymentDataRequestUpdate);\n\t\t\t\t\t});\n\n\t\t\t\t}\tcatch(err) {\n\t\t\t\t\tconsole.log('catch');\n\t\t\t\t\t// show error in developer console for debugging\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\treject({\n\t\t\t\t\t\ttransactionState: 'ERROR',\n\t\t\t\t\t\terror: {\n\t\t\t\t\t\t\tintent: 'PAYMENT_AUTHORIZATION',\n\t\t\t\t\t\t\tmessage: 'Insufficient funds',\n\t\t\t\t\t\t\treason: 'PAYMENT_DATA_INVALID'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Provide Google Pay API with a payment amount, currency, and amount status\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#TransactionInfo|TransactionInfo}\n\t\t *\n\t\t * @param {function} resolve callback\n\t\t * @returns {object} transaction info, suitable for use as transactionInfo property of PaymentDataRequest\n\t\t */\n\t\tgetGoogleTransactionInfo( resolve ) {\n\n\t\t\t// get transaction info from cart\n\t\t\tconst data = {\n\t\t\t\taction: `wc_${this.gatewayID}_google_pay_get_transaction_info`,\n\t\t\t}\n\n\t\t\t$.post(this.ajaxURL, data, ( response ) => {\n\n\t\t\t\tconsole.log(response);\n\n\t\t\t\tif (response.success) {\n\t\t\t\t\tresolve( $.parseJSON( response.data ) )\n\t\t\t\t} else {\n\t\t\t\t\tthis.fail_payment( 'Could not build transaction info. ' + response.data.message );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t/**\n\t\t * Get updated totals and shipping options via AJAX for use in the PaymentDataRequest\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/response-objects#PaymentDataRequestUpdate|PaymentDataRequestUpdate}\n\t\t *\n\t\t * @param {object} shippingAddress shipping address\n\t\t * @param {object} shippingMethod chosen shipping method\n\t\t * @param {function} resolve callback\n\t\t */\n\t\tgetUpdatedTotals( shippingAddress, shippingMethod, resolve ) {\n\n\t\t\tconst data = {\n\t\t\t\taction: `wc_${this.gatewayID}_google_pay_recalculate_totals`,\n\t\t\t\t'nonce': this.recalculateTotalsNonce,\n\t\t\t\tshippingAddress,\n\t\t\t\tshippingMethod\n\t\t\t}\n\n\t\t\tif (this.productID) {\n\t\t\t\tdata.productID = this.productID;\n\t\t\t}\n\n\t\t\t$.post(this.ajaxURL, data, ( response ) => {\n\n\t\t\t\tconsole.log(response);\n\n\t\t\t\tif (response.success) {\n\t\t\t\t\tresolve( $.parseJSON( response.data ) )\n\t\t\t\t} else {\n\t\t\t\t\tthis.fail_payment( 'Could not recalculate totals. ' + response.data.message );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t/**\n\t\t * Provide Google Pay API with shipping address parameters when using dynamic buy flow.\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#ShippingAddressParameters|ShippingAddressParameters}\n\t\t * @returns {object} shipping address details, suitable for use as shippingAddressParameters property of PaymentDataRequest\n\t\t */\n\t\tgetGoogleShippingAddressParameters() {\n\n\t\t\treturn  {\n\t\t\t\t// @todo: get from WC\n\t\t\t\tallowedCountryCodes: ['US'],\n\t\t\t\tphoneNumberRequired: true\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Provide Google Pay API with a payment data error.\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/response-objects#PaymentDataError|PaymentDataError}\n\t\t * @returns {object} payment data error, suitable for use as error property of PaymentDataRequestUpdate\n\t\t */\n\t\tgetGoogleUnserviceableAddressError() {\n\t\t\treturn {\n\t\t\t\treason: \"SHIPPING_ADDRESS_UNSERVICEABLE\",\n\t\t\t\tmessage: \"Cannot ship to the selected address\",\n\t\t\t\tintent: \"SHIPPING_ADDRESS\"\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Add a Google Pay purchase button alongside an existing checkout button\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/request-objects#ButtonOptions|Button options}\n\t\t * @see {@link https://developers.google.com/pay/api/web/guides/brand-guidelines|Google Pay brand guidelines}\n\t\t */\n\t\taddGooglePayButton() {\n\n\t\t\tconst paymentsClient = this.getGooglePaymentsClient();\n\t\t\tconst button = paymentsClient.createButton({\n\t\t\t\tonClick: () => this.onGooglePaymentButtonClicked()\n\t\t\t});\n\t\t\tdocument.getElementById('sv-wc-google-pay-button-container').appendChild(button);\n\t\t}\n\n\t\t/**\n\t\t * Prefetch payment data to improve performance\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/client#prefetchPaymentData|prefetchPaymentData()}\n\t\t */\n\t\tprefetchGooglePaymentData() {\n\n\t\t\tthis.getGooglePaymentDataRequest( ( paymentDataRequest ) => {\n\n\t\t\t\t// transactionInfo must be set but does not affect cache\n\t\t\t\tpaymentDataRequest.transactionInfo = {\n\t\t\t\t\ttotalPriceStatus: 'NOT_CURRENTLY_KNOWN',\n\t\t\t\t\tcurrencyCode: 'USD'\n\t\t\t\t};\n\t\t\t\tconst paymentsClient = this.getGooglePaymentsClient();\n\t\t\t\tpaymentsClient.prefetchPaymentData(paymentDataRequest);\n\t\t\t} );\n\t\t}\n\n\t\t/**\n\t\t * Process payment data returned by the Google Pay API\n\t\t *\n\t\t * @see {@link https://developers.google.com/pay/api/web/reference/response-objects#PaymentData|PaymentData object reference}\n\t\t *\n\t\t * @param {object} paymentData response from Google Pay API after user approves payment\n\t\t * @param {function} resolve callback\n\t\t */\n\t\tprocessPayment(paymentData, resolve) {\n\n\t\t\t// show returned data in developer console for debugging\n\t\t\tconsole.log(paymentData);\n\n\t\t\t// pass payment token to your gateway to process payment\n\t\t\tconst data = {\n\t\t\t\taction: `wc_${this.gatewayID}_google_pay_process_payment`,\n\t\t\t\tnonce: this.processNonce,\n\t\t\t\tpaymentData: JSON.stringify(paymentData)\n\t\t\t}\n\n\t\t\treturn $.post(this.ajaxURL, data, (response) => {\n\t\t\t\tif (response.success) {\n\t\t\t\t\tresolve({transactionState: 'SUCCESS'});\n\t\t\t\t\twindow.location = response.data.redirect;\n\t\t\t\t} else {\n\t\t\t\t\tresolve({\n\t\t\t\t\t\ttransactionState: 'ERROR',\n\t\t\t\t\t\terror: {\n\t\t\t\t\t\t\tintent: 'SHIPPING_ADDRESS',\n\t\t\t\t\t\t\tmessage: 'Invalid data',\n\t\t\t\t\t\t\treason: 'PAYMENT_DATA_INVALID'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.fail_payment( 'Payment could no be processed. ' + response.data.message );\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Show Google Pay payment sheet when Google Pay payment button is clicked\n\t\t */\n\t\tonGooglePaymentButtonClicked() {\n\n\t\t\tthis.block_ui();\n\n\t\t\tthis.getGooglePaymentDataRequest( ( paymentDataRequest ) => {\n\n\t\t\t\tconsole.log(paymentDataRequest);\n\t\t\t\tconsole.log(paymentDataRequest.transactionInfo);\n\t\t\t\tconsole.log(paymentDataRequest.transactionInfo.displayItems);\n\t\t\t\tconst paymentsClient = this.getGooglePaymentsClient();\n\t\t\t\ttry {\n\t\t\t\t\tpaymentsClient.loadPaymentData(paymentDataRequest);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// show error in developer console for debugging\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Initialize Google PaymentsClient after Google-hosted JavaScript has loaded\n\t\t *\n\t\t * Display a Google Pay payment button after confirmation of the viewer's\n\t\t * ability to pay.\n\t\t */\n\t\tinit() {\n\n\t\t\t// initialize for the various pages\n\t\t\tif ($('form.cart').length) {\n\t\t\t\tthis.init_product_page();\n\t\t\t} else if ($('form.woocommerce-cart-form').length) {\n\t\t\t\tthis.init_cart_page();\n\t\t\t} else if ($('form.woocommerce-checkout').length) {\n\t\t\t\tthis.init_checkout_page()\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst paymentsClient = this.getGooglePaymentsClient();\n\t\t\tpaymentsClient.isReadyToPay(this.getGoogleIsReadyToPayRequest())\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response.result) {\n\t\t\t\t\t\tthis.addGooglePayButton();\n\t\t\t\t\t\t// @todo prefetch payment data to improve performance after confirming site functionality\n\t\t\t\t\t\t// this.prefetchGooglePaymentData();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\t// show error in developer console for debugging\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Initializes the product page.\n\t\t */\n\t\tinit_product_page() {\n\t\t\tthis.ui_element = $('form.cart');\n\t\t}\n\n\t\t/**\n\t\t * Initializes the cart page.\n\t\t */\n\t\tinit_cart_page() {\n\t\t\tthis.ui_element = $('form.woocommerce-cart-form').parents('div.woocommerce');\n\t\t}\n\n\t\t/**\n\t\t * Initializes the checkout page.\n\t\t */\n\t\tinit_checkout_page() {\n\t\t\tthis.ui_element = $('form.woocommerce-checkout');\n\t\t}\n\n\t\t/**\n\t\t * Fails the purchase based on the gateway result.\n\t\t */\n\t\tfail_payment ( error ) {\n\n\t\t\tconsole.error( '[Google Pay] ' + error );\n\n\t\t\tthis.unblock_ui();\n\n\t\t\tthis.render_errors( [ this.genericError ] );\n\t\t}\n\n\t\t/**\n\t\t * Renders any new errors and bring them into the viewport.\n \t\t */\n\t\trender_errors( errors ) {\n\n\t\t\t// hide and remove any previous errors\n\t\t\t$('.woocommerce-error, .woocommerce-message').remove();\n\n\t\t\t// add errors\n\t\t\tthis.ui_element.prepend('<ul class=\"woocommerce-error\"><li>' + errors.join('</li><li>') + '</li></ul>');\n\n\t\t\t// unblock UI\n\t\t\tthis.ui_element.removeClass('processing').unblock();\n\n\t\t\t// scroll to top\n\t\t\t$('html, body').animate({scrollTop: this.ui_element.offset().top - 100}, 1000);\n\t\t}\n\n\t\t/**\n\t\t * Blocks the payment form UI.\n\t\t */\n\t\tblock_ui() {\n\t\t\tthis.ui_element.block({message: null, overlayCSS: {background: '#fff', opacity: 0.6}});\n\t\t}\n\n\t\t/**\n\t\t * Unblocks the payment form UI.\n\t\t */\n\t\tunblock_ui() {\n\t\t\tthis.ui_element.unblock();\n\t\t}\n\t}\n\n\t$( document.body ).trigger( 'sv_wc_google_pay_handler_v5_8_1_loaded' );\n\n} );\n"],"file":"sv-wc-payment-gateway-google-pay.min.js"}